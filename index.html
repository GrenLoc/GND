<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Grenada Location Code Generator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Header -->
  <header class="app-header">
    <div class="header-inner">
      <div class="logo-block">
        <span class="logo-flag">ðŸ‡¬ðŸ‡©</span>
        <div>
          <h1 class="logo-title">GrenLoc</h1>
          <p class="logo-sub">Digital Location Code System</p>
        </div>
      </div>
      <div class="header-badge">Phase 1 MVP</div>
    </div>
  </header>

  <!-- Main Layout -->
  <main class="app-main">

    <!-- Map Panel -->
    <section class="map-panel">
      <div class="map-instruction">
        <span class="pulse-dot"></span>
        Click anywhere on the map to generate a location code
      </div>
      <div id="map"></div>
    </section>

    <!-- Info Panel -->
    <aside class="info-panel">

      <!-- Code Display -->
      <div class="card code-card" id="code-card">
        <div class="card-label">Location Code</div>
        <div class="location-code" id="location-code">GN-???-??????</div>
        <div class="coord-display" id="coord-display">Click the map to begin</div>
        <div class="parish-display" id="parish-display"></div>
      </div>

      <!-- Actions -->
      <div class="card action-card" id="action-card">
        <button class="btn btn-primary" id="btn-copy" disabled>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
          Copy Code
        </button>
        <button class="btn btn-secondary" id="btn-maps" disabled>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="10" r="3"/><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/></svg>
          Open in Google Maps
        </button>
      </div>

      <!-- QR Code -->
      <div class="card qr-card" id="qr-card">
        <div class="card-label">Navigation QR Code</div>
        <div class="qr-wrapper" id="qr-wrapper">
          <div class="qr-placeholder">
            <svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="3" opacity="0.3">
              <rect x="10" y="10" width="35" height="35" rx="4"/>
              <rect x="55" y="10" width="35" height="35" rx="4"/>
              <rect x="10" y="55" width="35" height="35" rx="4"/>
              <rect x="20" y="20" width="15" height="15" fill="currentColor" stroke="none"/>
              <rect x="65" y="20" width="15" height="15" fill="currentColor" stroke="none"/>
              <rect x="20" y="65" width="15" height="15" fill="currentColor" stroke="none"/>
              <rect x="55" y="55" width="8" height="8" fill="currentColor" stroke="none"/>
              <rect x="68" y="55" width="8" height="8" fill="currentColor" stroke="none"/>
              <rect x="82" y="55" width="8" height="8" fill="currentColor" stroke="none"/>
              <rect x="55" y="68" width="8" height="8" fill="currentColor" stroke="none"/>
              <rect x="82" y="82" width="8" height="8" fill="currentColor" stroke="none"/>
            </svg>
            <p>QR code will appear here</p>
          </div>
          <canvas id="qr-canvas" style="display:none;"></canvas>
        </div>
      </div>

      <!-- Grid Debug (collapsible) -->
      <details class="card debug-card">
        <summary>Grid Debug Info</summary>
        <div class="debug-content" id="debug-content">
          <div class="debug-row"><span>Grid X:</span><span id="dbg-gx">â€”</span></div>
          <div class="debug-row"><span>Grid Y:</span><span id="dbg-gy">â€”</span></div>
          <div class="debug-row"><span>Lat Meters:</span><span id="dbg-lm">â€”</span></div>
          <div class="debug-row"><span>Lng Meters:</span><span id="dbg-nm">â€”</span></div>
          <div class="debug-row"><span>Parish (raw):</span><span id="dbg-par">â€”</span></div>
        </div>
      </details>

    </aside>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <p>This independent digital location tool is not affiliated with the Government of Grenada.</p>
    <p class="footer-tech">Built with Leaflet.js Â· OpenStreetMap Â· GrenLoc Grid System v1.0</p>
  </footer>

  <!-- Toast notification -->
  <div class="toast" id="toast"></div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJfcDVXsepgm5a9qGt2bfaRFtOKOfo-sw&callback=initMap" async defer></script>
  <script src="script.js"></script>
</body>
</html>
